{"version":3,"sources":["launches.js"],"names":["async","getPlanets","fetch","json","fillSelect","planets","planetsSelect","document","querySelector","forEach","planet","option","createElement","value","keplerName","textContent","appendChild","validateForm","form","launchData","FormData","key","submitLaunch","array","flatMap","element","object","[object Object]","response","method","headers","Content-Type","body","JSON","stringify","result","console","log","error","addSpinner","spinner","style","display","setTimeout","reset","postRequest","addEventListener","evt","preventDefault","getRequest"],"mappings":"AAMAA,eAAeC,aAGb,aAFkBC,MAAM,qCACJC,OAItBH,eAAeI,WAAWC,GACxB,MAAMC,EAAgBC,SAASC,cAAc,WAC7CH,EAAQI,QAASC,IACf,MAAMC,EAASJ,SAASK,cAAc,UACtCD,EAAOE,MAAQH,EAAOI,WACtBH,EAAOI,YAAcL,EAAOI,WAC5BR,EAAcU,YAAYL,KAI9B,SAASM,aAAaC,GACpB,MAAMC,EAAa,IAAIC,SAASF,GAChC,IAAK,MAAOG,EAAKR,KAAUM,EACzB,IAAKN,EACH,OAAO,EAGX,OAAO,EAGTb,eAAesB,aAAaJ,GAC1B,MAEMK,EAFa,IAAI,IAAIH,SAASF,IAEXM,QAASC,GACzBA,GAGHC,EAAS,CACbC,CAACJ,EAAM,IAAKA,EAAM,GAClBI,CAACJ,EAAM,IAAKA,EAAM,GAClBI,CAACJ,EAAM,IAAKA,EAAM,GAClBI,CAACJ,EAAM,IAAKA,EAAM,IAGpB,IACE,MAAMK,QAAiB1B,MAAM,oCAAqC,CAChE2B,OAAQ,OACRC,QAAS,CACPC,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUR,KAEjBS,QAAeP,EAASzB,OAC9BiC,QAAQC,IAAIF,GACZ,MAAOG,GACPF,QAAQC,IAAIC,IAIhB,SAASC,WAAWrB,GAClB,MAAMsB,EAAUjC,SAASC,cAAc,YACvCgC,EAAQC,MAAMC,QAAU,OACxBC,WAAW,KACTH,EAAQC,MAAMC,QAAU,OACxBxB,EAAK0B,SACJ,KAIL5C,eAAe6C,cACb,MAAM3B,EAAOX,SAASC,cAAc,SACpCU,EAAK4B,iBAAiB,SAAU9C,MAAO+C,IACrCA,EAAIC,iBACC/B,aAAaC,UAIZI,aAAaJ,GACnBqB,WAAWrB,IAJTkB,QAAQC,IAAI,iBAQlBrC,eAAeiD,aACb5C,cAAgBJ,mBACVG,WAAWC,SAtFnBE,SAASuC,iBAAiB,mBAAoB9C,gBACtCiD,mBACAJ","file":"launches.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", async () => {\r\n  await getRequest();\r\n  await postRequest();\r\n});\r\n\r\n//Functions\r\nasync function getPlanets() {\r\n  const res = await fetch(\"http://localhost:3000/v1/planets\");\r\n  const planets = res.json();\r\n  return planets;\r\n}\r\n\r\nasync function fillSelect(planets) {\r\n  const planetsSelect = document.querySelector(\"#target\");\r\n  planets.forEach((planet) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = planet.keplerName;\r\n    option.textContent = planet.keplerName;\r\n    planetsSelect.appendChild(option);\r\n  });\r\n}\r\n\r\nfunction validateForm(form) {\r\n  const launchData = new FormData(form);\r\n  for (const [key, value] of launchData) {\r\n    if (!value) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nasync function submitLaunch(form) {\r\n  const launchData = [...new FormData(form)];\r\n\r\n  const array = launchData.flatMap((element) => {\r\n    return element;\r\n  });\r\n\r\n  const object = {\r\n    [array[0]]: array[1],\r\n    [array[2]]: array[3],\r\n    [array[4]]: array[5],\r\n    [array[6]]: array[7],\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(\"http://localhost:3000/v1/launches\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(object),\r\n    });\r\n    const result = await response.json();\r\n    console.log(result);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction addSpinner(form) {\r\n  const spinner = document.querySelector(\".spinner\");\r\n  spinner.style.display = \"flex\";\r\n  setTimeout(() => {\r\n    spinner.style.display = \"none\";\r\n    form.reset();\r\n  }, 3000);\r\n}\r\n\r\n//Requests\r\nasync function postRequest() {\r\n  const form = document.querySelector(\"#form\");\r\n  form.addEventListener(\"submit\", async (evt) => {\r\n    evt.preventDefault();\r\n    if (!validateForm(form)) {\r\n      console.log(\"No validado\");\r\n      return;\r\n    }\r\n    await submitLaunch(form);\r\n    addSpinner(form);\r\n  });\r\n}\r\n\r\nasync function getRequest() {\r\n  planets = await getPlanets();\r\n  await fillSelect(planets);\r\n}\r\n"]}