{"version":3,"sources":["upcoming.js"],"names":["async","getLaunches","res","fetch","window","location","origin","json","sortAndFilter","launches","filter","launch","upcoming","sort","a","b","flightNumber","fillTable","table","document","querySelector","forEach","launchDate","Date","toLocaleDateString","year","month","day","tr","createElement","innerHTML","mission","rocket","target","appendChild","abortLaunch","evt","parentElement","children","textContent","response","method","result","console","log","remove","error","ok","getRequest","addEventListener"],"mappings":"AAKAA,eAAeC,cACb,MAAMC,QAAYC,MAASC,OAAOC,SAASC,OAAnB,gBAExB,aADuBJ,EAAIK,OAI7B,SAASC,cAAcC,GAOrB,OANyBA,EAASC,OAAQC,IACb,IAApBA,EAAOC,UAEwBC,KACtC,CAACC,EAAGC,IAAMD,EAAEE,aAAeD,EAAEC,cAKjC,SAASC,UAAUR,GACjB,MAAMS,EAAQC,SAASC,cAAc,SACrCX,EAASY,QAASV,IAChB,MAAMW,EAAa,IAAIC,KAAKZ,EAAOW,YAAYE,mBAAmB,QAAS,CACzEC,KAAM,UACNC,MAAO,OACPC,IAAK,YAGDC,EAAKT,SAASU,cAAc,MAClCD,EAAGE,UAAY,kGAEPnB,EAAOK,gCACPM,qBACAX,EAAOoB,2BACPpB,EAAOqB,0BACPrB,EAAOsB,QAAU,gBAEzBf,EAAMgB,YAAYN,KAItB5B,eAAemC,YAAYC,GACzB,MAAMR,EAAKQ,EAAIC,cACTrB,EAAeY,EAAGU,SAAS,GAAGC,YACpC,IACE,MAAMC,QAAiBrC,MACrB,GAAGC,OAAOC,SAASC,sBAAsBU,IACzC,CACEyB,OAAQ,WAGNC,QAAeF,EAASjC,OAC9BoC,QAAQC,IAAIF,GACZd,EAAGiB,SACH,MAAOC,GACP,MAAO,CAAEC,IAAI,IAMjB/C,eAAegD,aAEb/B,UADiBT,oBAAoBP,gBAhEvCkB,SAAS8B,iBAAiB,mBAAoBjD,gBACtCgD","file":"upcoming.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", async () => {\r\n  await getRequest();\r\n});\r\n\r\n//Functions\r\nasync function getLaunches() {\r\n  const res = await fetch(`${window.location.origin}/v1/launches`);\r\n  const launches = await res.json();\r\n  return launches;\r\n}\r\n\r\nfunction sortAndFilter(launches) {\r\n  const filteredLaunches = launches.filter((launch) => {\r\n    return launch.upcoming === true;\r\n  });\r\n  const sortedLaunches = filteredLaunches.sort(\r\n    (a, b) => a.flightNumber - b.flightNumber\r\n  );\r\n  return sortedLaunches;\r\n}\r\n\r\nfunction fillTable(launches) {\r\n  const table = document.querySelector(\"tbody\");\r\n  launches.forEach((launch) => {\r\n    const launchDate = new Date(launch.launchDate).toLocaleDateString(\"es-MX\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n\r\n    const tr = document.createElement(\"tr\");\r\n    tr.innerHTML = `\r\n      <td style=\"color: red; cursor: pointer;\" onclick=\"abortLaunch(this)\">âœ–</td>\r\n      <td>${launch.flightNumber}</td>\r\n      <td>${launchDate}</td>\r\n      <td>${launch.mission}</td>\r\n      <td>${launch.rocket}</td>\r\n      <td>${launch.target || \"\"}</td>\r\n    `;\r\n    table.appendChild(tr);\r\n  });\r\n}\r\n\r\nasync function abortLaunch(evt) {\r\n  const tr = evt.parentElement;\r\n  const flightNumber = tr.children[1].textContent;\r\n  try {\r\n    const response = await fetch(\r\n      `${window.location.origin}/v1/launches/${flightNumber}`,\r\n      {\r\n        method: \"DELETE\",\r\n      }\r\n    );\r\n    const result = await response.json();\r\n    console.log(result);\r\n    tr.remove();\r\n  } catch (error) {\r\n    return { ok: false };\r\n  }\r\n}\r\n\r\n//Requests\r\n\r\nasync function getRequest() {\r\n  const launches = sortAndFilter(await getLaunches());\r\n  fillTable(launches);\r\n}\r\n"]}